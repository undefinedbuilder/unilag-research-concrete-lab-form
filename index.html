
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UNILAG Concrete Lab – External Client Cube Test Form</title>

  <link rel="stylesheet" href="style.css" />
  <!-- jsPDF for PDF generation -->
  <script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js" defer></script>
  <!-- Main front-end logic -->
  <script src="script.js" defer></script>
</head>

<body>
  <main class="container">
    <!-- HEADER -->
    <header class="header">
      <img src="unilag-logo.png" class="logo" alt="UNILAG Logo" />

      <div class="header-text">
        <div class="header-university">UNIVERSITY OF LAGOS</div>
        <div class="header-dept">Department of Civil &amp; Environmental Engineering</div>
        <div class="header-lab">CONCRETE LABORATORY</div>
      </div>

      <p class="notice">
        <strong>NOTE:</strong> For external clients and commercial cube tests. Enter 0 for any
        component that is not used.
      </p>
    </header>

    <!-- MAIN GRID -->
    <div class="main-grid">
      <!-- FORM -->
      <section class="card">
        <h3>External Client Cube Test Form</h3>

        <form id="mix-form">
          <!-- CLIENT AND PROJECT DETAILS -->
          <h4 class="section-title">Client &amp; Project Details</h4>

          <div class="grid two">
            <label>
              <span class="label-line">
                Company / Client Name <span class="required-asterisk">*</span>
              </span>
              <input type="text" id="clientName" />
            </label>

            <label>
              <span class="label-line">
                Contact Email <span class="required-asterisk">*</span>
              </span>
              <input type="email" id="contactEmail" />
            </label>

            <label>
              <span class="label-line">
                Organisation Type <span class="required-asterisk">*</span>
              </span>
              <input
                type="text"
                id="organisationType"
                placeholder="e.g., Construction Company, Consulting Firm"
              />
            </label>

            <label>
              <span class="label-line">
                Contact Person <span class="required-asterisk">*</span>
              </span>
              <input type="text" id="contactPerson" />
            </label>

            <label>
              <span class="label-line">
                Contact Phone Number <span class="required-asterisk">*</span>
              </span>
              <input type="tel" id="phoneNumber" />
            </label>

            <label>
              <span class="label-line">
                Project / Site <span class="required-asterisk">*</span>
              </span>
              <input
                type="text"
                id="projectSite"
                placeholder="e.g., Lekki Phase 1"
              />
            </label>
          </div>

          <!-- MIX DESIGN OVERVIEW -->
          <h4 class="section-title">Mix Design Overview</h4>

          <div class="grid two">
            <label>
              <span class="label-line">
                Crushing Date <span class="required-asterisk">*</span>
              </span>
              <input type="date" id="crushDate" />
            </label>

            <label>
              <span class="label-line">
                Concrete Type <span class="required-asterisk">*</span>
              </span>
              <select id="concreteType">
                <option value="">-- Select --</option>
                <option>Normal strength</option>
                <option>High strength</option>
                <option>Self-compacting</option>
                <option>Fiber-reinforced</option>
                <option>Lightweight</option>
                <option>Other</option>
              </select>
            </label>

            <label id="concreteTypeOtherWrapper" style="display: none;">
              <span class="label-line">
                Specify Concrete Type <span class="required-asterisk">*</span>
              </span>
              <input type="text" id="concreteTypeOther" />
            </label>

            <label>
              <span class="label-line">
                Cement Type <span class="required-asterisk">*</span>
              </span>
              <select id="cementType">
                <option value="">-- Select --</option>
                <option>Ordinary Portland Cement</option>
                <option>Rapid Hardening Cement</option>
                <option>Portland Limestone Cement</option>
                <option>Blended (CEM II)</option>
                <option>Other</option>
              </select>
            </label>

            <label id="cementTypeOtherWrapper" style="display: none;">
              <span class="label-line">
                Specify Cement Type <span class="required-asterisk">*</span>
              </span>
              <input type="text" id="cementTypeOther" />
            </label>

            <label>
              <span class="label-line">
                Slump / Flow (mm) <span class="required-asterisk">*</span>
              </span>
              <input type="number" min="0" id="slump" />
            </label>

            <label>
              <span class="label-line">
                Age at Testing (days) <span class="required-asterisk">*</span>
              </span>
              <input type="number" min="1" id="ageDays" />
            </label>

            <label>
              <span class="label-line">
                Number of Cubes Submitted <span class="required-asterisk">*</span>
              </span>
              <input type="number" min="1" id="cubesCount" />
            </label>

            <label>
              <span class="label-line">
                Target Compressive Strength (MPa)
                <span class="required-asterisk">*</span>
              </span>
              <input type="number" min="0" step="0.1" id="targetStrength" />
            </label>

            <label>
              <span class="label-line">
                General Notes / Site Information <span class="required-asterisk">*</span>
              </span>
              <textarea
                id="notes"
                rows="3"
                placeholder="E.g. Grade of Concrete"
              ></textarea>
            </label>
          </div>

          <!-- MIX INPUT MODE -->
          <h4 class="section-title">Mix Input Mode</h4>

          <div class="grid two">
            <label>
              <span class="label-line">
                <input type="radio" name="inputMode" value="kg" id="modeKg" checked />
                &nbsp; Input Material Quantities in kg/m³
              </span>
            </label>
            <label>
              <span class="label-line">
                <input type="radio" name="inputMode" value="ratio" id="modeRatio" />
                &nbsp; Input Material Quantities in Ratios
              </span>
            </label>
          </div>

          <!-- MATERIAL QUANTITIES (KG/M3) -->
          <h4 id="kgHeading" class="section-title">Material Quantities – Kg/m³</h4>

          <div id="kgInputs">
            <div class="grid two">
              <label>
                <span class="label-line">
                  Cement (kg/m³) <span class="required-asterisk">*</span>
                </span>
                <input type="number" min="0" step="0.1" id="cementContent" />
              </label>

              <label>
                <span class="label-line">
                  Water (kg/m³) <span class="required-asterisk">*</span>
                </span>
                <input type="number" min="0" step="0.1" id="waterContent" />
              </label>

              <label>
                <span class="label-line">
                  Fine Aggregate (kg/m³) <span class="required-asterisk">*</span>
                </span>
                <input type="number" min="0" step="0.1" id="fineAgg" />
              </label>

              <label>
                <span class="label-line">
                  Medium Aggregate (kg/m³) <span class="required-asterisk">*</span>
                </span>
                <input type="number" min="0" step="0.1" id="mediumAgg" />
              </label>

              <label>
                <span class="label-line">
                  Coarse Aggregate (kg/m³) <span class="required-asterisk">*</span>
                </span>
                <input type="number" min="0" step="0.1" id="coarseAgg" />
              </label>
            </div>
          </div>

          <!-- MATERIAL QUANTITIES (RATIOS) -->
          <h4 id="ratioHeading" class="section-title">Material Quantities – Ratios (by Cement)</h4>

          <div id="ratioInputs" style="display: none;">
            <div class="grid two">
              <label>
                <span class="label-line">
                  Cement <span class="required-asterisk">*</span>
                </span>
                <input type="number" min="0" step="0.01" id="ratioCement" value="1" />
              </label>

              <label>
                <span class="label-line">
                  Fine Aggregate <span class="required-asterisk">*</span>
                </span>
                <input type="number" min="0" step="0.01" id="ratioFine" />
              </label>

              <label>
                <span class="label-line">
                  Medium Aggregate <span class="required-asterisk">*</span>
                </span>
                <input type="number" min="0" step="0.01" id="ratioMedium" />
              </label>

              <label>
                <span class="label-line">
                  Coarse Aggregate <span class="required-asterisk">*</span>
                </span>
                <input type="number" min="0" step="0.01" id="ratioCoarse" />
              </label>

              <label>
                <span class="label-line">
                  Water <span class="required-asterisk">*</span>
                </span>
                <input type="number" min="0" step="0.01" id="ratioWater" />
              </label>
            </div>
          </div>

          <!-- W/C & MIX RATIO -->
          <div id="wcratio-box" class="wc-box" style="display:none;">
              <strong>Water–Cement Ratio (from kg/m³):</strong>
              <span id="wcRatioValue">0.00</span>
          </div>

          <div id="mixratio-box" class="wc-box" style="display:none;">
              <strong>Normalized Mix Ratio (by cement, from kg/m³):</strong>
              <span id="mixRatioValue">–</span>
          </div>

          <!-- CHEMICAL ADMIXTURES -->
          <h4 class="section-title">Chemical Admixtures</h4>

          <div id="admixtures-container" class="dynamic-group"></div>

          <button type="button" id="add-admixture-btn" class="btn-primary small">
            + Add Admixture
          </button>

          <!-- PARTIAL CEMENT REPLACEMENTS -->
          <h4 class="section-title">Partial Cement Replacements (SCMs)</h4>

          <div id="scms-container" class="dynamic-group"></div>

          <button type="button" id="add-scm-btn" class="btn-primary small">
            + Add SCM
          </button>

          <!-- ACTIONS AND STATUS -->
          <div class="actions two-cols">
            <button type="submit" id="save-mix-btn" class="btn-submit">
              Submit, Save &amp; Generate PDF
            </button>
            <button type="button" id="reset-form-btn" class="btn-secondary">
              Clear Form
            </button>
          </div>

          <div id="form-error-summary" class="error-summary"></div>

          <p id="status-line" class="status-pill" style="display: none;"></p>
        </form>
      </section>

      <!-- SAVED MIXES TABLE -->
      <section class="card">
        <h3>Saved Client Mixes</h3>

        <div class="table-actions">
          <button id="export-csv-btn" class="btn-primary small">Export CSV</button>
          <button id="clear-all-btn" class="btn-primary small outline">Clear All</button>
        </div>

        <div class="table-wrapper">
          <table>
            <thead>
              <tr>
                <th>App No</th>
                <th>Mode</th>
                <th>Client / Company</th>
                <th>Type</th>
                <th>W/C</th>
                <th>Saved</th>
              </tr>
            </thead>
            <tbody id="mixes-table-body">
              <tr><td colspan="6" class="no-data">No mixes saved yet.</td></tr>
            </tbody>
          </table>
        </div>
        <p class="subtle small-note">
          Click a row to load that mix back into the form.
        </p>
      </section>
    </div>

    <!-- APPLICATION NUMBER MODAL -->
    <div
      id="appModal"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
      aria-labelledby="modalTitle"
    >
      <div class="modal-card research">
        <div class="modal-header">
          <h4 id="modalTitle">Application Number</h4>
          <button id="modalClose" type="button" class="modal-x" aria-label="Close dialog">
            ×
          </button>
        </div>
        <div class="modal-body">
          <div class="modal-number" id="modalNumber">UNILAG-CL-K000001</div>
          <div class="modal-note">
            Please keep this number safe and quote it in all discussions with the Concrete Laboratory.
          </div>
        </div>
      </div>
    </div>

    <!-- FOOTER -->
    <footer class="footer">
      © <span id="year"></span> Designed by Jesuto Ilugbo for The Concrete Laboratory, University of Lagos.
    </footer>
  </main>
</body>
</html>